(()=>{"use strict";const e=(e,t)=>{fetch(`http://localhost:8080/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},t=e=>e<10?"0"+e:e,n=(e,t)=>{e?t.classList.remove("disabled"):t.classList.add("disabled")},a=(e,t)=>{t?e.classList.remove("empty"):e.classList.add("empty")};window.addEventListener("online",(()=>{const t=JSON.parse(localStorage.getItem("fans")),n=JSON.parse(localStorage.getItem("news"));t&&t.forEach((t=>e("fans",t))),n&&n.forEach((t=>e("news",t))),localStorage.removeItem("news"),localStorage.removeItem("fans")}));const s=window.navigator.onLine;!function(s){const l=document.getElementById("user"),o=document.getElementById("feedback"),i=document.querySelector(".send-btn");if(l&&o&&i){function c(e){e.forEach((e=>{d(e.userName,e.post,e.time)}))}function d(e,t,n){const a=document.querySelector(".fans-feedback"),s=document.createElement("div"),l=`\n        <div class="text">${t}</div>\n        <div class="feedback-info">\n          <div class="create-time">${n}</div>\n          <div class="create-by">${e}</div>\n        </div>\n      `;s.classList.add("feedback"),s.innerHTML=l,a.append(s)}s?fetch("http://localhost:8080/fans").then((e=>e.json())).then((e=>{c(e)})):c(JSON.parse(localStorage.getItem("fans"))||[]),l.addEventListener("input",(e=>{const t=e.target.value;a(l,t),n(l.value&&o.value,i)})),o.addEventListener("input",(e=>{const t=e.target.value;a(o,t),n(l.value&&o.value,i)})),i.addEventListener("click",(a=>{a.preventDefault(),l.value&&o.value&&(function(n,a){const l=(()=>{const e=new Date;return`${t(e.getDate())}.${t(e.getMonth()+1)}.${e.getFullYear()} ${t(e.getHours())}:${t(e.getMinutes())}`})();if(s)e("fans",{userName:n,post:a,time:l});else{const e=localStorage.getItem("fans");window.localStorage.setItem("fans",e?JSON.stringify([...JSON.parse(e),{userName:n,post:a,time:l}]):JSON.stringify([{userName:n,post:a,time:l}]))}d(n,a,l)}(l.value,o.value),l.value="",o.value="",n(l.value&&o.value,i))}))}}(s),function(t){const s=document.getElementById("new-title"),l=document.getElementById("new-text"),o=document.getElementById("new-submit"),i=document.getElementById("file-upload");let c="";s&&l&&o&&(i.addEventListener("change",(e=>{let t=e.target.files,a=new FileReader;a.onload=(t[0],function(e){const t=document.querySelector(".drop-down");c=e.target.result;const a=document.createElement("div");a.innerHTML=`\n            <img src="${c}" alt="image" height="250" width="250"/>\n          `,t.append(a),n(c&&s.value&&l.value,o)}),a.readAsDataURL(t[0])})),s.addEventListener("input",(e=>{const t=e.target.value;a(s,t),n(c&&s.value&&l.value,o)})),l.addEventListener("input",(e=>{const t=e.target.value;a(l,t),n(c&&s.value&&l.value,o)})),o.addEventListener("click",(a=>{a.preventDefault(),c&&s.value&&l.value&&(function(n,a,s){if(t)e("news",{img:n,title:a,text:s});else{const e=localStorage.getItem("news");window.localStorage.setItem("news",e?JSON.stringify([...JSON.parse(e),{img:n,title:a,text:s}]):JSON.stringify([{img:n,title:a,text:s}]))}}(c,s.value,l.value),s.value="",l.value="",c="",n(c&&s.value&&l.value,o))})))}(s),function(e){const t=document.querySelector(".latest-news");if(t){function n(e){e.forEach((e=>{const n=document.createElement("div");n.classList.add("news-card"),n.innerHTML=`\n          <div class="img-wrapper">\n            <img class="image" src="${e.img}" alt="first new" />\n          </div>\n          <div class="card-content">\n            <h2 class="title">${e.title}</h2>\n            <p class="news-text">${e.text}</p>\n          </div>\n        `,t.append(n)}))}e?fetch("http://localhost:8080/news").then((e=>e.json())).then((e=>{n(e)})):n(JSON.parse(localStorage.getItem("news"))||[])}}(s)})();